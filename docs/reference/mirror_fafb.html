<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Mirror an object in FAFB space using FAFB-JRC2018F registration — mirror_fafb • nat.jrcbrains</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Mirror an object in FAFB space using FAFB-JRC2018F registration — mirror_fafb" />
<meta property="og:description" content="Mirror an object in FAFB space using FAFB-JRC2018F registration" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">nat.jrcbrains</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="../SUPPORT.html">Help</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://natverse.github.io">natverse</a>
</li>
<li>
  <a href="https://github.com/natverse/nat.jrcbrains">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Mirror an object in FAFB space using FAFB-JRC2018F registration</h1>
    <small class="dont-index">Source: <a href='https://github.com/natverse/nat.jrcbrains/blob/master/R/mirror.R'><code>R/mirror.R</code></a></small>
    <div class="hidden name"><code>mirror_fafb.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Mirror an object in FAFB space using FAFB-JRC2018F registration</p>
    </div>

    <pre class="usage"><span class='fu'>mirror_fafb</span>(<span class='no'>x</span>, <span class='kw'>sample</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>subset</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>via</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>An object containing 3D vertices (e.g. a neuron, surface, points)</p></td>
    </tr>
    <tr>
      <th>sample</th>
      <td><p>The starting brain space in which <code>x</code> lives -
<code>FAFB14</code> by default if it is not otherwise other specified.</p></td>
    </tr>
    <tr>
      <th>subset</th>
      <td><p>Character, numeric or logical vector specifying on which subset
of <code>X</code> the function <code>FUN</code> should be applied. Elements outside the
subset are passed through unmodified.</p></td>
    </tr>
    <tr>
      <th>via</th>
      <td><p>(optional, for expert use only) Intermediate template brain that
the registration sequence must pass through. See details and <code>xform_brain</code>
for more information.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments passed to <code>xform_brain</code> and
<code>mirror_brain</code></p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A mirrored version of the neuron/surface or other 3D object.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function works by mapping the input data to <b>JRC2018F</b>, a
  high quality symmetric female brain template. The data are then flipped
  (since <b>JRC2018F</b> is symmetric no other action is required) and then
  returned to the starting space. In order to ensure that the Bogovic et al
  bridging registrations are preferred the via argument will be filled with
  the value "FAFB14um" i.e. <b>FAFB14</b> calibrated in microns. This works
  because the Bogovic registrations were based on a mock synaptic staining
  using synapse locations that had been rescaled to microns before calculating
  a registration with ANTs to <b>JRC2018F</b>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \donttest{</span>
<span class='co'># transform arbitrary location (in nm)</span>
<span class='fu'>mirror_fafb</span>(<span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span>(<span class='fl'>388112</span>, <span class='fl'>162988</span>, <span class='fl'>132840</span>))</div><div class='output co'>#&gt;          [,1]     [,2]     [,3]
#&gt; [1,] 667366.9 174034.2 102780.7</div><div class='input'><span class='co'># same but in units of microns</span>
<span class='fu'>mirror_fafb</span>(<span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span>(<span class='fl'>388.112</span>, <span class='fl'>162.988</span>, <span class='fl'>132.84</span>), <span class='kw'>sample</span><span class='kw'>=</span><span class='st'>'FAFB14um'</span>)</div><div class='output co'>#&gt;          [,1]     [,2]     [,3]
#&gt; [1,] 667.3669 174.0342 102.7807</div><div class='input'><span class='co'># no messages</span>
<span class='fu'>mirror_fafb</span>(<span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span>(<span class='fl'>388112</span>, <span class='fl'>162988</span>, <span class='fl'>132840</span>), <span class='kw'>Verbose</span><span class='kw'>=</span><span class='fl'>FALSE</span>)</div><div class='output co'>#&gt;          [,1]     [,2]     [,3]
#&gt; [1,] 667366.9 174034.2 102780.7</div><div class='input'>
<span class='co'># transform arbitrary location (from and to raw pixel coordinates)</span>
<span class='no'>voxel.size</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>4</span>,<span class='fl'>4</span>,<span class='fl'>40</span>)
<span class='fu'>mirror_fafb</span>(<span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span>(<span class='fl'>97028</span>, <span class='fl'>40747</span>, <span class='fl'>3321</span>)* <span class='no'>voxel.size</span>)/<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='no'>voxel.size</span>)</div><div class='output co'>#&gt;          [,1]     [,2]     [,3]
#&gt; [1,] 166841.7 43508.56 2569.518</div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>nat.flybrains</span>)
<span class='kw'>if</span>(<span class='fu'><a href='https://rdrr.io/r/base/library.html'>require</a></span>(<span class='st'>'elmr'</span>, <span class='kw'>quietly</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)) {
<span class='no'>FAFB.surf.m</span> <span class='kw'>&lt;-</span> <span class='fu'>mirror_fafb</span>(<span class='no'>FAFB14.surf</span>)
<span class='fu'>wire3d</span>(<span class='fu'>as.mesh3d</span>(<span class='no'>FAFB.surf</span>), <span class='kw'>col</span><span class='kw'>=</span><span class='st'>'blue'</span>)
<span class='fu'>wire3d</span>(<span class='fu'>as.mesh3d</span>(<span class='no'>FAFB.surf.m</span>), <span class='kw'>col</span><span class='kw'>=</span><span class='st'>'red'</span>)
}

<span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='co'># you can also use with points in https://flywire.ai space</span>
<span class='co'># converts from raw (voxel) coords used by Neuroglancer to nm and back again</span>
<span class='no'>voxel.size</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>4</span>,<span class='fl'>4</span>,<span class='fl'>40</span>)
<span class='fu'>mirror_fafb</span>(<span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span>(<span class='fl'>120508</span>, <span class='fl'>46292</span>, <span class='fl'>1667</span>)*<span class='no'>voxel.size</span>, <span class='kw'>sample</span><span class='kw'>=</span><span class='st'>'FlyWire'</span>)/<span class='no'>voxel.size</span>
<span class='co'># compare with just using FAFB14</span>
<span class='fu'>mirror_fafb</span>(<span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span>(<span class='fl'>120508</span>, <span class='fl'>46292</span>, <span class='fl'>1667</span>)*<span class='no'>voxel.size</span>)/<span class='no'>voxel.size</span>
}
<span class='co'># }</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Gregory Jefferis.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


